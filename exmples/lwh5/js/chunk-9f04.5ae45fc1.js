(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f04"],{"3aed":function(t,e,n){},"432b":function(t,e,n){"use strict";var i=n("3aed"),s=n.n(i);s.a},4825:function(t,e,n){"use strict";var i=n("8a8d"),s=n.n(i);s.a},"646e":function(t,e,n){"use strict";var i=n("72a8"),s=n.n(i);s.a},"72a8":function(t,e,n){},"7f2e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("transition",{attrs:{name:"van-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"van-modal",on:{click:t.onCancel,touchmove:function(t){t.stopPropagation(),t.preventDefault()}}})]),n("div",{staticClass:"van-dialog",class:{closed:!t.visible},style:{top:t.top}},[t.showTitle?n("div",{class:["van-dialog__header","van-dialog__header--"+t.inputAlign]},[t._v(t._s(t.title))]):t._e(),n("div",{staticClass:"van-dialog__content"},[n("van-field",{ref:"input",attrs:{placeholder:t.placeholder,"input-align":t.inputAlign},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onConfirm(e):null}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),n("div",{staticClass:"van-hairline--top van-dialog__footer van-dialog__footer--buttons"},[n("button",{staticClass:"van-button van-button--default van-button--large van-dialog__cancel",on:{click:t.onCancel}},[n("span",{staticClass:"van-button__text"},[t._v(t._s(t.cancelButtonText))])]),n("button",{staticClass:"van-button van-button--default van-button--large van-dialog__confirm",attrs:{type:"submit"},on:{click:t.onConfirm}},[n("span",{staticClass:"van-button__text"},[t._v(t._s(t.confirmButtonText))])])])])],1)},s=[],a=(n("cadf"),n("551c"),n("097d"),"-100px"),o={props:{visible:{type:Boolean,default:!1},text:{type:String,default:""},placeholder:{type:String,default:"请输入评论内容"},confirmButtonText:{type:String,default:"确认"},cancelButtonText:{type:String,default:"取消"},showTitle:{type:Boolean,default:!1},title:{type:String,default:"提示"},inputAlign:{type:String,default:"center"}},data:function(){return{content:this.text,top:a}},watch:{text:function(){this.content!==this.text&&(this.content=this.text)}},methods:{focus:function(){var t=this;window.document.querySelector("body").style.overflow="hidden",this.$refs.input.$el.querySelector("input").focus(),this.$nextTick(function(){t.top="35%"})},onConfirm:function(){this.content&&(this.$emit("onConfirm",this.content),this.onCancel())},onCancel:function(){this.$emit("update:visible",!1),window.document.querySelector("body").style.overflow="auto",this.top=a,this.$refs.input.$el.querySelector("input").blur()}}},c=o,r=(n("646e"),n("2877")),u=Object(r["a"])(c,i,s,!1,null,"21688f88",null);u.options.__file="PopupInput.vue";e["a"]=u.exports},"81d7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"moments"},[n("header",{staticClass:"header"},[n("van-row",{attrs:{type:"flex",justify:"space-between",align:"center"}},[n("van-col",{staticClass:"headimg",attrs:{span:"10"}},[n("img",{attrs:{src:t.headinfo.headURL||"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1540890457037&di=9efdbda9ef45554dce6478edb5118b0d&imgtype=0&src=http%3A%2F%2Fa1.att.hudong.com%2F17%2F70%2F00300000899554130571703864107.jpg",alt:""},on:{click:t.redirectMoments}})]),t.isMe?t._e():n("van-col",{staticClass:"handle",attrs:{span:"14"}},["Y"==t.headinfo.isFriend?n("a",{attrs:{href:"javascript:;"},on:{click:t.onChat}},[t._v("会话")]):t._e(),"N"!=t.headinfo.isFriend||t.isMe?t._e():n("a",{attrs:{href:"javascript:;"},on:{click:t.onAddFriend}},[t._v("加为好友")])])],1),n("div",{staticClass:"userinfo"},[n("span",{staticClass:"username"},[t._v(t._s(t.headinfo.nickName||"--"))]),n("span",{staticClass:"verify"},[t._v(t._s("Y"===t.headinfo.isVerifiCode?"已验证":"未验证"))])]),n("div",{staticClass:"intro"},[n("div",{staticStyle:{position:"relative"}},[t.isMe?n("span",{on:{click:t.onShowSignatureModal}},[t._v("\n          "+t._s(t.headinfo.signature||"点击编辑个性签名")+"\n        ")]):t._e(),t.isMe&&t.headinfo.signature?n("a",{staticClass:"intro-edit",on:{click:t.onShowSignatureModal}},[t._v("编辑")]):t._e()]),n("div",{staticClass:"van-hairline--top",staticStyle:{"margin-top":"15px","padding-bottom":"15px"}}),n("van-row",{staticClass:"stats",attrs:{type:"flex",justify:"space-around"}},[n("van-col",{attrs:{span:"8"}},[n("div",{staticClass:"money"},[n("div",{staticClass:"num"},[t._v(t._s(t.headinfo.friendNum||0))]),n("div",{staticClass:"name"},[t._v("好友")])])]),n("van-col",{attrs:{span:"8"}},[n("div",{staticClass:"money"},[n("div",{staticClass:"num"},[t._v(t._s(t.headinfo.recFriendNum||0))]),n("div",{staticClass:"name"},[t._v("推荐")])])]),n("van-col",{attrs:{span:"8"}},[n("div",{staticClass:"money"},[n("div",{staticClass:"num"},[t._v(t._s(t.headinfo.momentNUm||0))]),n("div",{staticClass:"name"},[t._v("新鲜事")])])])],1)],1)],1),n("div",{staticClass:"moment-list"},t._l(t.moments,function(e,i){return n("moment-item",{key:i,attrs:{item:e},on:{onRemove:t.onRemoveMoment}})})),n("popup-input",{ref:"popupInput",attrs:{visible:t.visibleSignatureModal,text:t.headinfo.signature,placeholder:"请输入一句话介绍"},on:{"update:visible":function(e){t.visibleSignatureModal=e},onConfirm:t.onUpdateSignature}})],1)},s=[],a=(n("f751"),n("db49")),o=n("7f2e"),c=n("e653"),r={components:{PopupInput:o["a"],MomentItem:c["a"]},data:function(){return{userId:"",headinfo:{},moments:[],userinfo:{},visibleSignatureModal:!1}},computed:{isMe:function(){return!this.$route.params.userId||this.$route.params.userId===this.$store.state.userinfo.userId},isAll:function(){return"/moments/all"===this.$route.path}},created:function(){var t=this;this.init(),this.$watch("$route.params.userId",this.init),this.isMe&&(this.$bridge.callhandler("setNavigationAction",{code:900,icon:"".concat(a["b"],"camera.png")},function(){}),this.$bridge.registerhandler("listenAction",function(){t.$bridge.callhandler("openPublishMomentPage",{},function(){t.init()})}))},methods:{init:function(){window.scroll(0,0),this.userId=this.$route.params.userId||"",this.fetch(),this.fetchMomentHeadInfo()},fetch:function(){this.isAll?this.fetchAll():this.isMe?this.fetchMy():this.fetchFriend()},fetchMomentHeadInfo:function(){var t=this,e=this.isMe?"getMomentHeadInfo":"getFriendMomentHeadInfo";this.$api[e]({userId:this.$route.params.userId||this.$store.state.userinfo.userId}).then(function(e){var n=e.data;t.headinfo=n.obj}).catch(function(){t.$toast.fail("fetchMomentHeadInfo\n请求失败!")})},fetchFriend:function(){var t=this;this.$api.getFriendMoments({userId:this.userId}).then(function(e){var n=e.data;t.moments=n.objs&&n.objs.length?n.objs:[],t.userinfo=n.obj?n.obj:{}},function(){t.$toast.fail("fetchFriend请求失败!")})},fetchAll:function(){var t=this;this.$api.getAllMoments().then(function(e){var n=e.data;t.moments=n.objs&&n.objs.length?n.objs:[],t.userinfo=n.obj?n.obj:{}},function(){t.$toast.fail("fetchFriend请求失败!")})},fetchMy:function(){var t=this;this.$api.getMyMoments().then(function(e){var n=e.data;n.objs&&n.objs.length?t.moments=n.objs.map(function(t){return Object.assign(t,{visible:!0})}):t.moments=[],t.userinfo=n.obj?n.obj:{}},function(){t.$toast.fail("fetch\n请求失败!")})},onChat:function(){var t=this;this.checkLogin()&&this.$api.getUserIm({userId:this.$route.params.userId}).then(function(e){var n=e.data;t.$bridge.callhandler("openIm",{sessionId:n.obj},function(){})}).catch(function(){t.$toast.fail("请求失败!")})},onAddFriend:function(){this.checkLogin()&&this.$bridge.callhandler("openAddFriendPage",{userId:this.$route.params.userId},function(){})},onShowSignatureModal:function(){this.visibleSignatureModal=!0,this.$refs.popupInput.focus()},onUpdateSignature:function(t){this.headinfo.signature=t,this.$api.updateSignature({signature:t})},onRemoveMoment:function(t){this.moments.some(function(e){return e.id===t&&(e.visible=!1,!0)})},redirectMoments:function(){var t=this.$route.params.userId||this.$store.state.userinfo.userId;this.$bridge.callhandler("openFriendPage",{userId:t},function(){})}}},u=r,l=(n("432b"),n("2877")),d=Object(l["a"])(u,i,s,!1,null,"729fd03a",null);d.options.__file="MomentList.vue";e["default"]=d.exports},"8a8d":function(t,e,n){},e653:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return!1!==t.item.visible?n("div",{staticClass:"moment-item"},[n("div",{staticClass:"media van-hairline--bottom"},[n("div",{staticClass:"headimg",on:{click:function(e){t.redirectMoments(t.item.userId,t.item.nickName)}}},[n("img",{staticClass:"van-hairline--surround",attrs:{src:t.item.headURL,alt:""}})]),n("div",{staticClass:"content",on:{click:function(e){t.handleToMoment(t.item.id)}}},[n("div",{staticClass:"nickname"},[t._v(t._s(t.item.nickName))]),n("div",{staticClass:"content"},[t._v(t._s(t.item.momentContent))]),n("div",{staticClass:"pictures van-row"},t._l(t.item.imageListS,function(e,i){return n("div",{key:i,staticClass:"picture-item",style:{backgroundImage:"url("+e+")"},on:{click:function(e){e.stopPropagation(),t.previewPicture(i,t.item.imageListB)}}})})),n("aside",{staticClass:"aside"},[n("span",[t._v(t._s(t._f("moment")(t.item.momentTime,"YYYY/MM/DD HH:mm"))+"\n          "),t.item.userId==t.$store.state.userinfo.userId?n("a",{on:{click:function(e){e.stopPropagation(),t.onRemoveMoment(t.item)}}},[t._v("删除")]):t._e(),t.item.userId!=t.$store.state.userinfo.userId?n("a",{on:{click:function(e){e.stopPropagation(),t.onReportMoment(t.item)}}},[t._v("举报")]):t._e()]),n("span",{staticClass:"handler"},[n("span",{on:{click:function(e){t.handleLike()}}},[n("i",{staticClass:"icon icon-like",class:{active:t.hasLike}}),t._v("\n            "+t._s(t.item.thumbUpNum||0)+"\n          ")]),n("span",{on:{click:function(e){t.$emit("onComment")}}},[n("i",{staticClass:"icon icon-comment"}),t._v(" "+t._s(t.item.msgNum||0)+"\n          ")])])])])])]):t._e()},s=[],a={props:{item:Object,hasLike:Boolean},methods:{handleLike:function(){this.checkLogin()&&this.$route.params.momentId&&this.$emit("addLike")},previewPicture:function(t,e){this.$bridge.callhandler("previewImage",{index:t,urls:e},function(){})},handleToMoment:function(t){this.$route.params.momentId||this.$router.push("/moment/".concat(t))},redirectMoments:function(t,e){console.log(e),this.$bridge.callhandler("openFriendPage",{userId:t},function(){})},onRemoveMoment:function(t){var e=this;this.$dialog.confirm({title:"确认删除？",beforeClose:function(n,i){"confirm"===n?(e.$emit("onRemove",t.id),e.$api.deleteMoment({momentId:t.id}).then(function(){e.$toast("已删除!")}).catch(function(){return e.$toast.fail("删除失败!")}),i()):i()}})},onReportMoment:function(){this.checkLogin()&&this.$toast("已举报!")}}},o=a,c=(n("4825"),n("2877")),r=Object(c["a"])(o,i,s,!1,null,"4a66c61e",null);r.options.__file="MomentItem.vue";e["a"]=r.exports}}]);