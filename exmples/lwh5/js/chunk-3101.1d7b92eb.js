(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3101"],{"6aef":function(e,t,a){"use strict";var i=a("ea39"),n=a.n(i);n.a},cfbc:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resume"},[a("van-cell-group",[a("van-cell",{attrs:{title:"入学时间","is-link":"",value:e._f("moment")(e.formData.startTime,"YYYY/MM/DD")},on:{click:function(t){e.onShowActionsheet("startTime")}}}),a("van-cell",{attrs:{title:"毕业时间","is-link":"",value:e._f("moment")(e.formData.endTime,"YYYY/MM/DD")},on:{click:function(t){e.onShowActionsheet("endTime")}}}),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{clearable:"",label:"学校名称",placeholder:"请输入学校名称","input-align":"right",name:"学校名称","error-message":e.errors.first("学校名称")},model:{value:e.formData.schoolName,callback:function(t){e.$set(e.formData,"schoolName",t)},expression:"formData.schoolName"}}),a("van-cell",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{title:"学历","is-link":"",name:"学历"},on:{click:function(t){e.onShowActionsheet("ducationNameCode")}},model:{value:e.formData.ducationNameCode,callback:function(t){e.$set(e.formData,"ducationNameCode",t)},expression:"formData.ducationNameCode"}},[[a("div",[e._v(e._s(e.showValue("LW_EDUCATION",e.formData.ducationNameCode)))]),a("div",{staticClass:"van-field__error-message"},[e._v(e._s(e.errors.first("学历")))])]],2),a("van-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{clearable:"",label:"专业",placeholder:"请输入专业","input-align":"right",name:"专业","error-message":e.errors.first("专业")},model:{value:e.formData.professional,callback:function(t){e.$set(e.formData,"professional",t)},expression:"formData.professional"}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.visible.startTime,callback:function(t){e.$set(e.visible,"startTime",t)},expression:"visible.startTime"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":new Date(1980,1,1),"max-date":new Date(2017,12,31)},on:{confirm:function(t){e.onDatetime(t,"startTime")},cancel:function(t){e.onDatetime(t,"startTime")}},model:{value:e.formData.startTime,callback:function(t){e.$set(e.formData,"startTime",t)},expression:"formData.startTime"}})],1),a("van-popup",{attrs:{position:"bottom"},model:{value:e.visible.endTime,callback:function(t){e.$set(e.visible,"endTime",t)},expression:"visible.endTime"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":new Date(1980,1,1),"max-date":new Date(2017,12,31)},on:{confirm:function(t){e.onDatetime(t,"endTime")},cancel:function(t){e.onDatetime(t,"endTime")}},model:{value:e.formData.endTime,callback:function(t){e.$set(e.formData,"endTime",t)},expression:"formData.endTime"}})],1),a("van-actionsheet",{attrs:{actions:e.options[e.map[e.currentKey]]},on:{select:e.onSelect},model:{value:e.visible[e.currentKey],callback:function(t){e.$set(e.visible,e.currentKey,t)},expression:"visible[currentKey]"}}),e.eduId?a("div",{staticClass:"footer"},[a("van-button",{staticClass:"btn-red",attrs:{block:""},on:{click:e.onDelete}},[e._v("删除")])],1):e._e(),e.$store.state.production?e._e():a("div",{staticClass:"footer"},[a("van-button",{staticClass:"btn",attrs:{block:""},on:{click:e.onSave}},[e._v("保存")])],1)],1)},n=[],o=(a("f751"),{name:"ResumeEduEdit",data:function(){return{loading:!1,eduId:0,formData:{schoolName:"",endTime:new Date,startTime:new Date,professional:"",ducationNameCode:""},visible:{endTime:!1,startTime:!1,ducationNameCode:!1},currentKey:"",map:{ducationNameCode:"LW_EDUCATION"}}},computed:{options:function(){return this.$store.state.dict.options},values:function(){return this.$store.state.dict.kvs}},created:function(){this.eduId=this.$route.params.eduId,"0"!==this.eduId?this.onFetch():this.eduId=0,this.listenSave()},methods:{onFetch:function(){var e=this;this.loading=!0,this.$api.getResumeEdu({id:this.eduId}).then(function(t){var a=t.data;e.formData=Object.assign(a.obj,{endTime:new Date(a.obj.endTime),startTime:new Date(a.obj.startTime)}),e.loading=!1}).catch(function(){e.$toast.fail("没有数据!"),e.loading=!1})},onSave:function(){var e=this;this.$validator.validate().then(function(t){t&&(e.loading||(e.loading=!0,e.save().then(function(){e.loading=!1,e.$toast.success("成功!"),setTimeout(function(){return e.$bridge.callhandler("backPage",{isRefresh:!0},function(){})},1e3)}).catch(function(){e.loading=!1,e.$toast.fail("数据保存错误!")})))})},listenSave:function(){this.$bridge.registerhandler("listenAction",this.onSave)},save:function(){var e=this,t=this.eduId?"updateResumeEdu":"createResumeEdu";return new Promise(function(a,i){e.$api[t](e.formData).then(function(){a()}).catch(function(){i()})})},onShowActionsheet:function(e){this.visible[e]=!0,this.currentKey=e},onSelect:function(e){this.formData[this.currentKey]=e.code,this.visible[this.currentKey]=!1},onDatetime:function(e,t){this.visible[t]=!1},onDelete:function(){var e=this;this.$api.deleteResumeEdu({id:this.eduId}).then(function(){e.$toast.success("删除成功!"),setTimeout(function(){return e.$bridge.callhandler("backPage",{isRefresh:!0},function(){})},800)}).catch(function(){e.$toast.fail("删除失败!")})}}}),s=o,r=(a("6aef"),a("2877")),c=Object(r["a"])(s,i,n,!1,null,"67c2a665",null);c.options.__file="ResumeEduEdit.vue";t["default"]=c.exports},ea39:function(e,t,a){}}]);