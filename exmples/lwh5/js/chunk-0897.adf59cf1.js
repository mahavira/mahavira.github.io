(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0897"],{"035b":function(t,n,e){"use strict";var i=e("9bf7"),o=e.n(i);o.a},"646e":function(t,n,e){"use strict";var i=e("72a8"),o=e.n(i);o.a},"72a8":function(t,n,e){},"7f2e":function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",[e("transition",{attrs:{name:"van-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"van-modal",on:{click:t.onCancel,touchmove:function(t){t.stopPropagation(),t.preventDefault()}}})]),e("div",{staticClass:"van-dialog",class:{closed:!t.visible},style:{top:t.top}},[t.showTitle?e("div",{class:["van-dialog__header","van-dialog__header--"+t.inputAlign]},[t._v(t._s(t.title))]):t._e(),e("div",{staticClass:"van-dialog__content"},[e("van-field",{ref:"input",attrs:{placeholder:t.placeholder,"input-align":t.inputAlign},on:{keyup:function(n){return"button"in n||!t._k(n.keyCode,"enter",13,n.key,"Enter")?t.onConfirm(n):null}},model:{value:t.content,callback:function(n){t.content=n},expression:"content"}})],1),e("div",{staticClass:"van-hairline--top van-dialog__footer van-dialog__footer--buttons"},[e("button",{staticClass:"van-button van-button--default van-button--large van-dialog__cancel",on:{click:t.onCancel}},[e("span",{staticClass:"van-button__text"},[t._v(t._s(t.cancelButtonText))])]),e("button",{staticClass:"van-button van-button--default van-button--large van-dialog__confirm",attrs:{type:"submit"},on:{click:t.onConfirm}},[e("span",{staticClass:"van-button__text"},[t._v(t._s(t.confirmButtonText))])])])])],1)},o=[],a=(e("cadf"),e("551c"),e("097d"),"-100px"),l={props:{visible:{type:Boolean,default:!1},text:{type:String,default:""},placeholder:{type:String,default:"请输入评论内容"},confirmButtonText:{type:String,default:"确认"},cancelButtonText:{type:String,default:"取消"},showTitle:{type:Boolean,default:!1},title:{type:String,default:"提示"},inputAlign:{type:String,default:"center"}},data:function(){return{content:this.text,top:a}},watch:{text:function(){this.content!==this.text&&(this.content=this.text)}},methods:{focus:function(){var t=this;window.document.querySelector("body").style.overflow="hidden",this.$refs.input.$el.querySelector("input").focus(),this.$nextTick(function(){t.top="35%"})},onConfirm:function(){this.content&&(this.$emit("onConfirm",this.content),this.onCancel())},onCancel:function(){this.$emit("update:visible",!1),window.document.querySelector("body").style.overflow="auto",this.top=a,this.$refs.input.$el.querySelector("input").blur()}}},s=l,c=(e("646e"),e("2877")),r=Object(c["a"])(s,i,o,!1,null,"21688f88",null);r.options.__file="PopupInput.vue";n["a"]=r.exports},"9bf7":function(t,n,e){},e472:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"broker"},[t.user.userId?e("van-cell-group",[e("van-cell",{attrs:{title:"账号",value:t.user.account},on:{click:t.callIm}},[e("van-icon",{staticClass:"van-cell__right-icon",attrs:{slot:"right-icon",name:"chat"},slot:"right-icon"})],1),e("van-cell",{attrs:{title:"头像"}},[e("div",{staticClass:"picture"},[e("img",{attrs:{src:t.user.headUrl}})])]),e("van-cell",{attrs:{title:"姓名",value:t.user.userName}}),e("van-cell",{attrs:{title:"性别",value:t.showValue("LW_SEX",t.user.sex)}}),e("van-cell",{attrs:{title:"所在公司",value:t.user.company}}),e("van-cell",{attrs:{title:"电话",value:t.user.phone},on:{click:t.callPhone}},[e("van-icon",{staticClass:"van-cell__right-icon",attrs:{slot:"right-icon",name:"phone"},slot:"right-icon"})],1),e("van-cell",{attrs:{title:"合作开始时间",value:t._f("moment")(t.user.startTime,"YYYY-MM-DD")}}),e("van-cell",{attrs:{title:"合作结束时间",value:t.user.endTime?t.$moment(t.user.endTime).format("YYYY-MM-DD"):"至今"}})],1):t._e(),t.loading||t.user.userId?t._e():e("div",{staticClass:"noData"},[t._v("暂无数据")]),t.loading?e("div",{staticClass:"loading fixed"},[e("van-loading")],1):t._e(),e("popup-input",{ref:"popupInput",attrs:{visible:t.visibleModal,title:"更换原因",showTitle:!0,placeholder:"请输入更换原因",inputAlign:"left"},on:{"update:visible":function(n){t.visibleModal=n},onConfirm:t.onConfirm}})],1)},o=[],a=(e("f751"),e("cadf"),e("551c"),e("097d"),e("7f2e")),l={name:"Broker",components:{PopupInput:a["a"]},data:function(){return{loading:!0,visibleModal:!1,user:{account:"",company:"",endTime:null,headUrl:"",imId:"",phone:"",sex:null,startTime:null,userId:"",userName:""}}},mounted:function(){this.onFetch(),this.listenAction()},methods:{onFetch:function(){var t=this;this.$api.getBroker().then(function(n){var e=n.data;t.user=Object.assign(e.obj,{endTime:e.obj.endTime||null,startTime:e.obj.startTime||null}),t.loading=!1}).catch(function(){t.loading=!1})},callPhone:function(){this.user.phone?this.$bridge.callhandler("callPhone",{phone:this.user.phone},function(){}):this.$toast("没有电话号码!")},callIm:function(){this.user.imId?this.$bridge.callhandler("openIm",{sessionId:this.user.imId},function(){}):this.$toast("没有找到IM id!")},listenAction:function(){var t=this;this.$bridge.callhandler("setNavigationAction",{code:900,text:"更换经纪人"},function(){}),this.$bridge.registerhandler("listenAction",function(){t.visibleModal=!0,t.$refs.popupInput.focus()})},onConfirm:function(t){var n=this;this.$api.changeBroker({updreason:t}).then(function(){n.$toast("申请成功!")}).catch(function(){n.$toast.fail("申请错误!")})}}},s=l,c=(e("035b"),e("2877")),r=Object(c["a"])(s,i,o,!1,null,"78221801",null);r.options.__file="Broker.vue";n["default"]=r.exports}}]);