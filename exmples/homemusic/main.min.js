!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="./",t(0)}([function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){u=e,i(m.default[g])}function i(e){var t=new Image;t.addEventListener("load",r),t.addEventListener("error",r),t.src=e}function r(){g++,b.css("width",g/f*100+"%"),g<f?i(m.default[g]):u()}function s(){return!h&&(h=!0,w.bg.play(),GetQueryString("serverId")||w.bg.pause(),w.error.play(),w.error.pause(),w.popup.play(),w.popup.pause(),w.press.play(),w.press.pause(),w.rewind.play(),w.rewind.pause(),w.slide.play(),w.slide.pause(),w.blessing.play(),void w.blessing.pause())}function d(){y||(w.bg.play(),$(this).addClass("on"))}function l(){w.bg.pause(),$(this).removeClass("on")}function p(){return w}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.playBgAudio=d,t.pauseBgAudio=l,t.getAudio=p;var u,c=n(10),m=a(c),g=0,f=m.default.length,b=$(".loadProcess .inner"),w={};w.bg=document.getElementById("soundBg"),w.error=document.getElementById("soundError"),w.popup=document.getElementById("soundPopup"),w.press=document.getElementById("soundPress"),w.rewind=document.getElementById("soundRewind"),w.slide=document.getElementById("soundSlide"),w.blessing=document.getElementById("soundBlessing"),w.bg.addEventListener("ended",function(e){w.bg.play()},!1);var h=!1;document.addEventListener("WeixinJSBridgeReady",s,!1),document.addEventListener("touchstart",s,!1);var y=!1;$(".music-offon").on("click",function(){$(this).toggleClass("on"),$(this).hasClass("on")?w.bg.play():(y=!0,w.bg.pause())})},function(e,t){"use strict";function n(){wx.onMenuShareTimeline(shareData),wx.onMenuShareAppMessage(shareData)}function a(){var e=GetQueryString("expired_at")-0,t=GetQueryString("serverId");(new Date).getTime()-e<259199900&&t?wx.downloadVoice({serverId:t,isShowProgressTips:0,success:function(e){localIdAudio=e.localId}}):$.get("/api/index.php?/homemusic/media/show/"+t,function(e){localIdAudioUrl=e.data.url})}Object.defineProperty(t,"__esModule",{value:!0}),t.share=n,window.isWechat=!1,window.shareData={title:"听，家乡的声音",desc:"绿地集团",imgUrl:window.location.origin+window.location.pathname+"images/share.jpg",link:window.location.origin+window.location.pathname},t.default=function(){"3000"!==window.location.port&&$.get("/api/index.php?/homemusic/wxjs/config?",{url:window.location.href},function(e){wx.config({debug:!1,appId:e.data.appId,timestamp:e.data.timestamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:e.data.jsApiList}),wx.error(function(e){alert(e)})})},wx.ready(function(){isWechat=!0,n(),a()}),window.localIdAudio="",window.localIdAudioUrl=""},function(e,t){"use strict";function n(e){return e.replace(/\b(\w)|\s(\w)/g,function(e){return e.toUpperCase()})}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)},window.log=function(){console.log.apply(null,arguments)},window.prefix=function(){var e="",t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var a in n)if(n[a]+"Transform"in t.style){e=n[a];break}return e}(),window.browserPrefix=function(e){return e?prefix+n(e):prefix},window.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},window.transformName=browserPrefix("transform")},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=GetQueryString("serverId");e?(0,p.default)():(0,d.default)()}n(8),n(9),n(7),n(3);var i=n(1),r=a(i),s=n(5),d=a(s),l=n(6),p=a(l),u=n(2),c=a(u);$(function(){(0,c.default)(),(0,r.default)(function(){o()})}),$(document).on("touchmove",function(e){e.preventDefault()})},function(e,t,n){"use strict";function a(){_=(0,v.getAudio)(),$("body").addClass("show"),setTimeout(function(){$(".page-play").show().addClass("first-animation-in"),setTimeout(function(){$(".btn-open-listen .inner").on("click",function(){(0,v.pauseBgAudio)(),_.blessing.play(),$(".page-play").removeClass("first-animation-in").addClass("first-animation-out"),setTimeout(function(){$(".page-home").show().addClass("first-animation-in")},1e3)})},3e3)},1e3),$(".btn-open-recorder .inner").on("click",function(){$(".page-home").removeClass("first-animation-in").addClass("first-animation-out"),_.slide.play(),$(".page-make").addClass("make").addClass("recorder-animation-in")}),O.on("click",function(){P===U.NONE||P===U.RECORD?o():P===U.RECORDING?r():(_.error.play(),O.data("type","none"),clearTimeout(h),h=setTimeout(function(){O.data("type","")},1e3))}),k.on("click",function(){P===U.RECORD?s():P===U.PLAYING?l():(_.error.play(),k.data("type","none"),clearTimeout(b),b=setTimeout(function(){k.data("type","")},1e3))}),A.on("click",function(){P===U.RECORD?p():P===U.UPDATEING||(_.error.play(),A.data("type","none"),clearTimeout(w),w=setTimeout(function(){A.data("type","")},1e3))}),$(".btn-share-tomum").on("click",function(){E.removeClass("hide").addClass("show")}),E.on("click",function(){E.removeClass("show").addClass("hide")})}function o(){(0,v.pauseBgAudio)(),_.blessing.pause(),isWechat&&(wx.startRecord({success:function(){P=U.RECORDING,O.data("type","on"),m(),N=(new Date).getTime(),B=0,D.text(B),requestAnimFrame(i)},cancel:function(){},fail:function(){alert("录音失败！")}}),wx.onVoiceRecordEnd({complete:function(e){x=e.localId,r()}})),_.popup.play()}function i(){S=(new Date).getTime(),S>=N+1e3*(B+1)&&(B++,D.text(B)),P===U.RECORDING&&requestAnimFrame(i)}function r(){(0,v.playBgAudio)(),isWechat&&wx.stopRecord({success:function(e){x=e.localId}}),_.press.play(),B||(B=1,D.text(B)),P=U.RECORD,O.data("type",""),f()}function s(){_.rewind.play(),P=U.PLAYING,k.data("type","on"),g(),G=B,D.text(G),y=setTimeout(function(){(0,v.pauseBgAudio)(),_.popup.play(),d(),isWechat&&(wx.playVoice({localId:x}),wx.onVoicePlayEnd({success:function(e){l()}}))},1500)}function d(){y=setTimeout(function(){G--,G<0?l():(D.text(G),P===U.PLAYING&&d())},1e3)}function l(){(0,v.playBgAudio)(),isWechat&&wx.stopVoice({localId:x}),_.press.play(),clearTimeout(y),P=U.RECORD,k.data("type",""),f()}function p(){_.popup.play(),$(".m-uploading").show(),P=U.UPDATEING,A.data("type","on"),isWechat&&wx.uploadVoice({localId:x,isShowProgressTips:0,success:function(e){I=e.serverId,u()}})}function u(){c(),window.shareData.link=window.location.origin+window.location.pathname+"?serverId="+I+"&duration="+B+"&expired_at="+(new Date).getTime(),(0,C.share)(),$.post("/api/index.php?/homemusic/media/store",{serverId:I,duration:B},function(){})}function c(){_.press.play(),D.text(B),$(".m-uploading").hide(),P=U.RECORD,A.data("type",""),$(".m-mailer-box").show(),$(".page-make").addClass("mailer-show")}function m(){R.addClass("recorder-ing"),T.addClass("recorder-ing")}function g(){R.addClass("recorder-play"),T.addClass("recorder-play")}function f(){R.removeClass("recorder-ing"),T.removeClass("recorder-ing"),R.removeClass("recorder-play"),T.removeClass("recorder-play")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var b,w,h,y,x,I,v=n(1),C=n(2),_={},O=$("#btnRecord"),k=$("#btnPlay"),A=$("#btnUpdata"),E=$(".page-share"),R=$(".m-tape-box"),T=$(".m-recorder"),D=$(".time-box .time span"),U={NONE:0,RECORD:1,RECORDING:2,PLAYING:3,UPDATEING:4},P=U.NONE,B=0,G=0,N=0,S=0;e.exports=t.default},function(e,t,n){"use strict";function a(){u=(0,p.getAudio)(),$("body").addClass("show"),$(".page-received").show(),setTimeout(function(){$(".page-received").addClass("open"),setTimeout(function(){u.slide.play()},1500),setTimeout(function(){$(".page-make").addClass("play").show().addClass("recorder-animation-in")},1e3)},200),m.on("click",function(){h?r():o()}),c.on("click",function(){u.popup.play(),c.data("type","on"),g.removeClass("hide").addClass("show")}),g.on("click",function(){c.data("type",""),g.removeClass("show").addClass("hide")}),$("#btnHome").on("click",function(){u.popup.play(),$("#btnHome").data("type","on")}),$.post("/api/index.php?/homemusic/media/see/"+GetQueryString("serverId"))}function o(){u.rewind.play(),(0,p.pauseBgAudio)(),h=!0,m.data("type","on"),s(),y=x,w.text(y),l=setTimeout(function(){u.popup.play(),i(),isWechat&&(wx.playVoice({localId:localIdAudio}),wx.onVoicePlayEnd({success:function(e){r()}}))},1500)}function i(){l=setTimeout(function(){y--,y<0?r():(w.text(y),i())},1e3)}function r(){(0,p.playBgAudio)(),isWechat&&wx.stopVoice({localId:localIdAudio}),u.press.play(),h=!1,clearTimeout(l),m.data("type",""),d()}function s(){f.addClass("recorder-play"),b.addClass("recorder-play")}function d(){f.removeClass("recorder-ing"),b.removeClass("recorder-ing"),f.removeClass("recorder-play"),b.removeClass("recorder-play")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var l,p=n(1),u={},c=$("#btnShare"),m=$("#btnPlayMum"),g=$(".page-share"),f=$(".m-tape-box"),b=$(".m-recorder"),w=$(".time-box .time span"),h=!1,y=0,x=GetQueryString("duration")-0;w.text(x),e.exports=t.default},function(e,t){e.exports={show:"show",logo1:"logo1",logo2:"logo2",fadeInDown:"fadeInDown","m-loading":"m-loading",hide:"hide","recorder-play":"recorder-play",wheel:"wheel",band:"band",bearing:"bearing",play:"play","recorder-ing":"recorder-ing","tape-move":"tape-move","page-play":"page-play",title:"title",txt:"txt","btn-open-listen":"btn-open-listen",inner:"inner","first-animation-in":"first-animation-in",fadeInUp:"fadeInUp",txt1:"txt1",txt2:"txt2",txt3:"txt3",fadeInUp2visible:"fadeInUp2visible",open:"open",fadeOutLeft:"fadeOutLeft","first-animation-out":"first-animation-out",fadeOut2:"fadeOut2",fadeOut:"fadeOut","page-home":"page-home","bg-icon-recorder":"bg-icon-recorder","btn-open-recorder":"btn-open-recorder",txt4:"txt4",txt5:"txt5",fadeInUp2:"fadeInUp2","page-make":"page-make","recorder-animation-in":"recorder-animation-in","m-recorder":"m-recorder",rotateIn:"rotateIn",make:"make","m-tape-box":"m-tape-box",rotateIn3:"rotateIn3","mailer-show":"mailer-show",tapeUp:"tapeUp",rotateOut:"rotateOut","m-mailer-box":"m-mailer-box","mailer-paper":"mailer-paper","btn-share-tomum":"btn-share-tomum","mum-recorder-show":"mum-recorder-show","cover-center":"cover-center",slideOut:"slideOut","cover-bg":"cover-bg","cover-left":"cover-left",slideOut1:"slideOut1","cover-right":"cover-right",slideOut2:"slideOut2",rotateIn2:"rotateIn2"}},function(e,t){e.exports={slideOut:"slideOut",slideOut1:"slideOut1",slideOut2:"slideOut2",tapeUp:"tapeUp",firstSectionOut:"firstSectionOut",fadeInRight:"fadeInRight",fadeOutLeft:"fadeOutLeft",slideOutDown:"slideOutDown",fadeInUp:"fadeInUp",fadeInDown:"fadeInDown",fadeInUp2:"fadeInUp2",fadeInUp2visible:"fadeInUp2visible",fadeInUp3:"fadeInUp3",fadeOut:"fadeOut",show:"show",hide:"hide",fadeOut2:"fadeOut2",fadeIn:"fadeIn",rotateIn:"rotateIn",rotateIn2:"rotateIn2",rotateIn3:"rotateIn3",play:"play",rotateOut:"rotateOut","tape-move":"tape-move",flipBook:"flipBook"}},function(e,t){e.exports={"m-loading":"m-loading","m-uploading":"m-uploading",mask:"mask","loading-ani":"loading-ani","play-modal":"play-modal","loading-ani-left":"loading-ani-left","loading-ani-right":"loading-ani-right","tape-move":"tape-move",loadProcess:"loadProcess",inner:"inner",p:"p",logo1:"logo1",logo2:"logo2","bg-icon-recorder":"bg-icon-recorder",title:"title","page-received":"page-received",bg:"bg",open:"open",flipBook:"flipBook",fadeOut2:"fadeOut2","page-home":"page-home",txt:"txt",txt1:"txt1",txt2:"txt2",txt3:"txt3",txt4:"txt4",txt5:"txt5","btn-open-recorder":"btn-open-recorder","page-play":"page-play","btn-open-listen":"btn-open-listen","page-make":"page-make",play:"play","m-recorder":"m-recorder","music-offon":"music-offon",on:"on","bearing-box":"bearing-box",bearing:"bearing",right:"right",left:"left","oprate-box":"oprate-box",make:"make",eject:"eject",listen:"listen","status-text":"status-text","btn-recoder":"btn-recoder","btn-play":"btn-play","btn-eject":"btn-eject","btn-playMum":"btn-playMum","btn-recorder-share":"btn-recorder-share","btn-backhome":"btn-backhome","m-tape-box":"m-tape-box","m-tape":"m-tape","tap-band":"tap-band","band-bg":"band-bg",band:"band","time-box":"time-box",time:"time","wheel-box":"wheel-box",wheel:"wheel","tape-main":"tape-main","m-mailer-box":"m-mailer-box","mailer-paper":"mailer-paper","btn-share-tomum":"btn-share-tomum","page-share":"page-share",show:"show",hide:"hide"}},function(e,t){e.exports=["./images/bg.jpg","./images/bg_backhome_btn.png","./images/bg_btn_open_listen.png","./images/bg_btn_open_recorder.png","./images/bg_btn_share_mum.png","./images/bg_complete_btn.png","./images/bg_icon_recorder.png","./images/bg_loading.png","./images/bg_loading_zhuan.png","./images/bg_mailer.png","./images/bg_music_offon.png","./images/bg_play_btn.png","./images/bg_record_btn.png","./images/bg_replay_btn.png","./images/bg_share_btn.png","./images/bg_tape_band.png","./images/bg_tape_blank.png","./images/bg_tape_time.png","./images/bg_tape_zhuan.png","./images/bg_zhou.png","./images/content.png","./images/content2.png","./images/content3.png","./images/logo1.png","./images/logo2.png","./images/m_recorder.png","./images/play-btn-status.jpg","./images/share-cover.png","./images/share.jpg","./images/share_bg.png","./images/title.png"]}]);